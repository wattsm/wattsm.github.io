<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>    
	Usermaatre &middot; Home    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
  <!-- Google analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56516871-1', 'auto');
    ga('send', 'pageview');

  </script>
</head>


  <body class="theme-base-0b">
  
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Usermaatre
        </a>
      </h1>
      <p class="lead">Programming, science, history and gaming. Not necessarily in that order.</p>
    </div>

    <nav class="sidebar-nav">
	  <a class="sidebar-nav-item active" href="/">Home</a>
	  <a class="sidebar-nav-item" href="/about">About</a>
	  <a class="sidebar-nav-item" href="/archive">Archive</a>
      <a class="sidebar-nav-item" href="https://twitter.com/m_d_watts" target="_blank">Twitter</a>	  
      <a class="sidebar-nav-item" href="https://github.com/wattsm" target="_blank">GitHub</a>      
    </nav>
	
	<p>&copy; 2014. All rights reserved.</p>
	
	<hr />
	
	<p style="font-size:80%;">
		<a style='font-size: 70%' href='/tags/beyond-earth'>Beyond Earth</a>
<a style='font-size: 70%' href='/tags/castle-windsor'>Castle Windsor</a>
<a style='font-size: 70%' href='/tags/ci'>CI</a>
<a style='font-size: 70%' href='/tags/civilization'>Civilization</a>
<a style='font-size: 70%' href='/tags/design'>Design</a>
<a style='font-size: 70%' href='/tags/entity-framework'>Entity Framework</a>
<a style='font-size: 170%' href='/tags/fsharp'>F#</a>
<a style='font-size: 70%' href='/tags/moq'>Moq</a>
<a style='font-size: 70%' href='/tags/odata'>OData</a>
<a style='font-size: 70%' href='/tags/psexec'>PsExec</a>
<a style='font-size: 70%' href='/tags/reflection'>Reflection</a>
<a style='font-size: 120%' href='/tags/tfs'>TFS</a>
<a style='font-size: 149%' href='/tags/unit-testing'>Unit Testing</a>
<a style='font-size: 120%' href='/tags/webapi'>WebAPI</a>
<a style='font-size: 70%' href='/tags/wix'>Wix</a>
<a style='font-size: 149%' href='/tags/xunit'>xUnit</a>

	</p>	
	
  </div>
</div>


    <div class="content container">	
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/programming/2014/12/12/testing-web-api-odata-controllers/">
        Testing Web API OData controllers
      </a>
    </h1>

    <span class="post-date">
		12 Dec 2014
&middot;
Programming 

	&middot;
	<a href="/tags/entity-framework">Entity Framework</a>, 	

	
	<a href="/tags/webapi">WebAPI</a>, 	

	
	<a href="/tags/unit-testing">Unit Testing</a>, 	

	
	<a href="/tags/moq">Moq</a>, 	

	
	<a href="/tags/xunit">xUnit</a>, 	

	
	<a href="/tags/odata">OData</a>	

	</span>

    <p>Microsoft&#39;s <a href="http://msdn.microsoft.com/en-us/data/ef.aspx">Entity Framework</a> is an occasionally handy <a href="https://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a> framework that allows you to query database entities using LINQ and to easily add, update and delete entities via
a variety of helper classes.</p>

<p>Recently I wrote a set of <a href="http://www.asp.net/web-api">WebAPI</a> controllers to expose an Entity Framework model as <a href="http://www.odata.org/">OData</a> endpoints. Exposing an Entity Framework model as OData using WebAPI is <a href="http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/odata-v4/create-an-odata-v4-endpoint">incredibly easy</a>.
However, when it came to testing my controllers I found that mocking Entity Framework is tricky, due to a combination of erratic use of interfaces and the apparent complexity of <code>IQueryable&lt;T&gt;</code>. </p>

<p>Luckily my controllers only used a few parts of the EF API, so I decided to write some lightweight wrappers to make testing easier. This had the bonus of also removing dependencies
on EF from my controllers.</p>

	
	<a href="/programming/2014/12/12/testing-web-api-odata-controllers/">Continue reading &raquo;</a>	
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/programming/2014/11/27/testing-dependency-registrations-with-castle-windsor/">
        Testing dependency registrations with Castle Windsor
      </a>
    </h1>

    <span class="post-date">
		27 Nov 2014
&middot;
Programming 

	&middot;
	<a href="/tags/castle-windsor">Castle Windsor</a>, 	

	
	<a href="/tags/xunit">xUnit</a>, 	

	
	<a href="/tags/unit-testing">Unit Testing</a>	

	</span>

    <p>Until recently one of the most frustrating bugs I have routinely found in my own code is incomplete dependency registrations. </p>

<p>It&#39;s a scenario I&#39;m sure everyone is familiar with - you&#39;ve just written some new components and got the unit tests passing, so now it&#39;s time to fire up the 
application and see your creations in action. Then as soon as the application starts it falls over because you forgot to add your new components to the <a href="http://en.wikipedia.org/wiki/Inversion_of_control">IOC</a> container,
leaving you with unresolvable dependencies.</p>

<p>I would curse my own forgetfulness as I fixed the problem and would often think to myself that it would be really handy if there was a way to test your dependency registrations.
I was pleasantly surprised then to find out that <a href="http://docs.castleproject.org/Default.aspx?Page=MainPage&amp;NS=Windsor&amp;AspxAutoDetectCookieSupport=1">Castle Windsor</a> supports exactly these kinds of tests.</p>

	
	<a href="/programming/2014/11/27/testing-dependency-registrations-with-castle-windsor/">Continue reading &raquo;</a>	
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/programming/2014/11/20/psexec-fsi-console-clear/">
        FSI, PsExec and Console.Clear
      </a>
    </h1>

    <span class="post-date">
		20 Nov 2014
&middot;
Programming 

	&middot;
	<a href="/tags/fsharp">F#</a>, 	

	
	<a href="/tags/psexec">PsExec</a>	

	</span>

    <p>I recently struggled with an error that I encountered during the process of setting up a continuous deployment TFS build
and I thought that I would write briefly about it in the hope of helping anyone else running into the same issue. The issue arises running <a href="http://msdn.microsoft.com/en-us/library/dd233175.aspx">FSI</a>
remotely using <a href="http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx">PsExec</a>.</p>

	
	<a href="/programming/2014/11/20/psexec-fsi-console-clear/">Continue reading &raquo;</a>	
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/programming/2014/11/18/modeling-mars-rovers-with-fsharp/">
        Modeling Mars rovers with F#
      </a>
    </h1>

    <span class="post-date">
		18 Nov 2014
&middot;
Programming 

	&middot;
	<a href="/tags/fsharp">F#</a>, 	

	
	<a href="/tags/design">Design</a>	

	</span>

    <p>Although currently somewhat overshadowed by <a href="http://www.esa.int/Our_Activities/Space_Science/Rosetta">ESA&#39;s amazing Rosetta mission</a>, <a href="http://en.wikipedia.org/wiki/Sojourner_(rover)">Mars rovers</a> <a href="http://en.wikipedia.org/wiki/Opportunity_(rover)">are awesome</a> <a href="http://en.wikipedia.org/wiki/Spirit_(rover)">in their</a> <a href="http://en.wikipedia.org/wiki/Curiosity_(rover)">own right</a>. 
So when <a href="http://www.readcopyupdate.com/">a colleague</a> pointed me in the direction of 
<a href="http://www.techinterviewpuzzles.com/2010/09/mars-rovers-thoughtworks-puzzles.html#Mars_Rovers_Puzzle">an interview puzzle about modeling Mars rovers</a>
and mentioned that he was writing an (immutable) F# implementation I decided to follow suit and have a go myself.</p>

	
	<a href="/programming/2014/11/18/modeling-mars-rovers-with-fsharp/">Continue reading &raquo;</a>	
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/gaming/2014/11/08/beyond-earth-good-bad-ugly/">
        Beyond Earth - the good, the bad and the ugly
      </a>
    </h1>

    <span class="post-date">
		08 Nov 2014
&middot;
Gaming 

	&middot;
	<a href="/tags/civilization">Civilization</a>, 	

	
	<a href="/tags/beyond-earth">Beyond Earth</a>	

	</span>

    <p>One of the first games I can remember playing was Sid Meier&#39;s Civilization on a black and white 286 PC. I&#39;ve played every game in the Civilization series apart 
from Alpha Centurai - I&#39;m not sure how I missed it, but I did. So I was both excited and wary of Beyond Earth - on the one hand it promised to add a novel twist 
on the standard Civ formula, but on the other hand there was no guarantee that twist would work out. </p>

<p>So, after a week or so of playing here&#39;s my good, bad and ugly of Beyond Earth.</p>

	
	<a href="/gaming/2014/11/08/beyond-earth-good-bad-ugly/">Continue reading &raquo;</a>	
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>
    </div>

  </body>
</html>
